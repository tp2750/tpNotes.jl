<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>README · tpNotes.jl</title><link rel="canonical" href="https://tp2750.github.io/tpNotes.jl/README/"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">tpNotes.jl</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li class="is-active"><a class="tocitem" href>README</a><ul class="internal"><li class="toplevel"><a class="tocitem" href="#Purpose"><span>Purpose</span></a></li><li class="toplevel"><a class="tocitem" href="#Vocabulary"><span>Vocabulary</span></a></li><li><a class="tocitem" href="#Vectors"><span>Vectors</span></a></li><li><a class="tocitem" href="#Combinations"><span>Combinations</span></a></li><li><a class="tocitem" href="#paste"><span><code>paste</code></span></a></li><li><a class="tocitem" href="#Loop-over-rows-of-data-frame"><span>Loop over rows of data frame</span></a></li><li><a class="tocitem" href="#Lists-and-dicts"><span>Lists and dicts</span></a></li><li class="toplevel"><a class="tocitem" href="#Development"><span>Development</span></a></li><li><a class="tocitem" href="#PkgTemplates"><span>PkgTemplates</span></a></li><li><a class="tocitem" href="#Using-ssh"><span>Using ssh</span></a></li><li class="toplevel"><a class="tocitem" href="#Documentation-using-Documenter.jl"><span>Documentation using Documenter.jl</span></a></li><li><a class="tocitem" href="#Adding-keys-for-Documenter-and-Github-Actions"><span>Adding keys for Documenter and Github Actions</span></a></li><li><a class="tocitem" href="#Building-the-docs"><span>Building the docs</span></a></li><li><a class="tocitem" href="#Examples"><span>Examples</span></a></li><li class="toplevel"><a class="tocitem" href="#Overloading-Base-operator"><span>Overloading Base operator</span></a></li><li><a class="tocitem" href="#Example"><span>Example</span></a></li><li class="toplevel"><a class="tocitem" href="#Code-coverage"><span>Code coverage</span></a></li><li class="toplevel"><a class="tocitem" href="#PackageCompile"><span>PackageCompile</span></a></li><li class="toplevel"><a class="tocitem" href="#Misc"><span>Misc</span></a></li><li><a class="tocitem" href="#Which-project-is-active?"><span>Which project is active?</span></a></li><li class="toplevel"><a class="tocitem" href="#K-means"><span>K-means</span></a></li><li><a class="tocitem" href="#K-medoids"><span>K-medoids</span></a></li><li class="toplevel"><a class="tocitem" href="#ENV[&quot;JULIA*NUM*THREADS&quot;]3,1"><span>ENV[&quot;JULIA<em>NUM</em>THREADS&quot;]=3,1</span></a></li><li><a class="tocitem" href="#using-PkgTemplates"><span>using PkgTemplates</span></a></li><li><a class="tocitem" href="#ENV[&quot;JULIA*PKG*PRESERVE*TIERED*INSTALLED&quot;]-true"><span>ENV[&quot;JULIA<em>PKG</em>PRESERVE<em>TIERED</em>INSTALLED&quot;] = true</span></a></li><li><a class="tocitem" href="#@info-&quot;PRESERVE*TIERED*INSTALLED-set-by-JULIA*PKG*PRESERVE*TIERED*INSTALLED&quot;"><span>@info &quot;PRESERVE<em>TIERED</em>INSTALLED set by JULIA<em>PKG</em>PRESERVE<em>TIERED</em>INSTALLED&quot;</span></a></li><li><a class="tocitem" href="#@info-&quot;To-reset-to-default-do:-ENV[\\&quot;JULIA*PKG*PRESERVE*TIERED*INSTALLED\\&quot;]-true&quot;"><span>@info &quot;To reset to default do: ENV[\&quot;JULIA<em>PKG</em>PRESERVE<em>TIERED</em>INSTALLED\&quot;] = true&quot;</span></a></li><li><a class="tocitem" href="#https://twitter.com/heyjoshday/status/1555527185028395010"><span>https://twitter.com/heyjoshday/status/1555527185028395010</span></a></li><li class="toplevel"><a class="tocitem" href="#macro-dev()"><span>macro dev()</span></a></li><li class="toplevel"><a class="tocitem" href="#pkg-Symbol("><span>pkg = Symbol(</span></a></li><li class="toplevel"><a class="tocitem" href="#replace("><span>replace(</span></a></li><li class="toplevel"><a class="tocitem" href="#readline(&quot;Project.toml&quot;),"><span>readline(&quot;Project.toml&quot;),</span></a></li><li class="toplevel"><a class="tocitem" href="#&quot;name-\\&quot;&quot;-&quot;&quot;,"><span>&quot;name = \&quot;&quot; =&gt; &quot;&quot;,</span></a></li><li class="toplevel"><a class="tocitem" href="#&#39;&quot;&#39;-&quot;&quot;"><span>&#39;&quot;&#39; =&gt; &quot;&quot;</span></a></li><li class="toplevel"><a class="tocitem" href="#)"><span>)</span></a></li><li class="toplevel"><a class="tocitem" href="#)-2"><span>)</span></a></li><li class="toplevel"><a class="tocitem" href="#esc(:(using-Pkg;-Pkg.activate(&quot;.&quot;);-using-Revise,-:pkg))"><span>esc(:(using Pkg; Pkg.activate(&quot;.&quot;); using Revise, pkg))</span></a></li><li class="toplevel"><a class="tocitem" href="#end"><span>end</span></a></li><li class="toplevel"><a class="tocitem" href="###-https://discourse.julialang.org/t/what-is-in-your-startup-jl/18228/2?utp2750"><span>## https://discourse.julialang.org/t/what-is-in-your-startup-jl/18228/2?u=tp2750</span></a></li><li class="toplevel"><a class="tocitem" href="#cdpkg(pkg)-cd(dirname(Base.find_package(string(pkg))))"><span>cdpkg(pkg) = cd(dirname(Base.find_package(string(pkg))))</span></a></li><li class="toplevel"><a class="tocitem" href="#macro-cdpkg(pkg)"><span>macro cdpkg(pkg)</span></a></li><li class="toplevel"><a class="tocitem" href="#cdpkg(pkg)"><span>cdpkg(pkg)</span></a></li><li class="toplevel"><a class="tocitem" href="#return-nothing"><span>return nothing</span></a></li><li class="toplevel"><a class="tocitem" href="#end-2"><span>end</span></a></li></ul></li><li><a class="tocitem" href="../logging/">Logging</a></li><li><a class="tocitem" href="../system/">Running system commands</a></li><li><a class="tocitem" href="../vectors/">Vectors</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>README</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>README</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/tp2750/tpNotes.jl/blob/master/README.md#L" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="tpNotes.jl"><a class="docs-heading-anchor" href="#tpNotes.jl">tpNotes.jl</a><a id="tpNotes.jl-1"></a><a class="docs-heading-anchor-permalink" href="#tpNotes.jl" title="Permalink"></a></h1><p>&lt;!–- <a href="https://tp2750.github.io/tpNotes.jl/stable"><img src="https://img.shields.io/badge/docs-stable-blue.svg" alt="Stable"/></a> –-&gt;  <a href="https://tp2750.github.io/tpNotes.jl/dev"><img src="https://img.shields.io/badge/docs-dev-blue.svg" alt="Dev"/></a> <a href="https://github.com/tp2750/tpNotes.jl/actions"><img src="https://github.com/tp2750/tpNotes.jl/workflows/CI/badge.svg" alt="Build Status"/></a> <a href="https://codecov.io/gh/tp2750/tpNotes.jl"><img src="https://codecov.io/gh/tp2750/tpNotes.jl/branch/master/graph/badge.svg" alt="Coverage"/></a></p><h1 id="Purpose"><a class="docs-heading-anchor" href="#Purpose">Purpose</a><a id="Purpose-1"></a><a class="docs-heading-anchor-permalink" href="#Purpose" title="Permalink"></a></h1><p>This repo tracks my notes on things I learn in Julia.</p><h1 id="Vocabulary"><a class="docs-heading-anchor" href="#Vocabulary">Vocabulary</a><a id="Vocabulary-1"></a><a class="docs-heading-anchor-permalink" href="#Vocabulary" title="Permalink"></a></h1><p>Standard idioms and their <code>R</code> equivalent.</p><p>Some R function names are implemented in <code>src/r.jl</code></p><h2 id="Vectors"><a class="docs-heading-anchor" href="#Vectors">Vectors</a><a id="Vectors-1"></a><a class="docs-heading-anchor-permalink" href="#Vectors" title="Permalink"></a></h2><p>Julia</p><pre><code class="language-">julia&gt; extrema([1,2,3])
(1, 3)

julia&gt; first(collect(1:10))
1

julia&gt; last(collect(1:10))
10
</code></pre><p>R</p><pre><code class="language-">&gt; range(c(1,2,3))
[1] 1 3
&gt; head(1:10,1)
[1] 1
&gt; tail(1:10,1)
[1] 10</code></pre><h2 id="Combinations"><a class="docs-heading-anchor" href="#Combinations">Combinations</a><a id="Combinations-1"></a><a class="docs-heading-anchor-permalink" href="#Combinations" title="Permalink"></a></h2><p>Julia</p><pre><code class="language-">julia&gt; using DataFrames
julia&gt; rename(DataFrame(Base.Iterators.product([1,2], [&quot;A&quot;,&quot;B&quot;,&quot;C&quot;])), [&quot;Num&quot;,&quot;Name&quot;])
6×2 DataFrame
 Row │ Num    Name   
     │ Int64  String 
─────┼───────────────
   1 │     1  A
   2 │     2  A
   3 │     1  B
   4 │     2  B
   5 │     1  C
   6 │     2  C

julia&gt; vec(string.([&quot;x&quot;, &quot;y&quot;], [1 2 3])) ## note: col-vector, row-vector. Ref https://github.com/JuliaAcademy/DataFrames/blob/main/2.%20First%20steps%20with%20data%20frames.ipynb
6-element Array{String,1}:
 &quot;x1&quot;
 &quot;y1&quot;
 &quot;x2&quot;
 &quot;y2&quot;
 &quot;x3&quot;
 &quot;y3&quot;
</code></pre><p>R</p><pre><code class="language-">setNames(expand.grid(c(1,2), c(&quot;A&quot;,&quot;B&quot;,&quot;C&quot;)), c(&quot;Num&quot;,&quot;Name&quot;))
  Num Name
1   1    A
2   2    A
3   1    B
4   2    B
5   1    C
6   2    C
</code></pre><h2 id="paste"><a class="docs-heading-anchor" href="#paste"><code>paste</code></a><a id="paste-1"></a><a class="docs-heading-anchor-permalink" href="#paste" title="Permalink"></a></h2><p>The R function <code>paste</code> does 2 things: 1. paste the elements of two string vectors together element by element; 2: collapse a string vector into a single string.</p><h3 id="Combining"><a class="docs-heading-anchor" href="#Combining">Combining</a><a id="Combining-1"></a><a class="docs-heading-anchor-permalink" href="#Combining" title="Permalink"></a></h3><p>R:</p><pre><code class="language-">paste(c(&quot;a&quot;, &quot;b&quot;), c(1,2))
[1] &quot;a 1&quot; &quot;b 2&quot;
paste(c(&quot;a&quot;, &quot;b&quot;), c(1,2), sep=&quot;&quot;)
[1] &quot;a1&quot; &quot;b2&quot;</code></pre><pre><code class="language-">julia&gt; string.([&quot;a&quot;, &quot;b&quot;], &quot; &quot;, [1,2])
2-element Vector{String}:
 &quot;a 1&quot;
 &quot;b 2&quot;

julia&gt; string.([&quot;a&quot;, &quot;b&quot;], [1,2])
2-element Vector{String}:
 &quot;a1&quot;
 &quot;b2&quot;</code></pre><h3 id="Collapse"><a class="docs-heading-anchor" href="#Collapse">Collapse</a><a id="Collapse-1"></a><a class="docs-heading-anchor-permalink" href="#Collapse" title="Permalink"></a></h3><p>R</p><pre><code class="language-">&gt; paste(c(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;), collapse=&quot;&quot;)
[1] &quot;abc&quot;
&gt; paste(c(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;), collapse=&quot;, &quot;)
[1] &quot;a, b, c&quot;</code></pre><p>Julia:</p><pre><code class="language-">julia&gt; join([&quot;a&quot;, &quot;b&quot;, &quot;c&quot;])
&quot;abc&quot;

julia&gt; join([&quot;a&quot;, &quot;b&quot;, &quot;c&quot;], &quot;, &quot;)
&quot;a, b, c&quot;
julia&gt; join([&quot;a&quot;, &quot;b&quot;, &quot;c&quot;], &quot;, &quot;, &quot; and &quot;)
&quot;a, b and c&quot;</code></pre><h2 id="Loop-over-rows-of-data-frame"><a class="docs-heading-anchor" href="#Loop-over-rows-of-data-frame">Loop over rows of data frame</a><a id="Loop-over-rows-of-data-frame-1"></a><a class="docs-heading-anchor-permalink" href="#Loop-over-rows-of-data-frame" title="Permalink"></a></h2><p>Julia</p><pre><code class="language-">using DataFrames, DataFramesMeta

df_in = rename(DataFrame(Base.Iterators.product([1,2], [&quot;A&quot;,&quot;B&quot;,&quot;C&quot;])), [&quot;Num&quot;,&quot;Name&quot;]);

@eachrow df_in begin 
  @newcol Res1::Vector{String}
  @newcol Res2::Vector{String}
  :Res1 = string(:Num) * :Name
  :Res2 = :Name * string(:Num)
end

6×4 DataFrame
 Row │ Num    Name    Res1    Res2   
     │ Int64  String  String  String 
─────┼───────────────────────────────
   1 │     1  A       1A      A1
   2 │     2  A       2A      A2
   3 │     1  B       1B      B1
   4 │     2  B       2B      B2
   5 │     1  C       1C      C1
   6 │     2  C       2C      C2

## Simpler for this case:
@transform(df_in, Res1 = string.(:Num) .* :Name, Res2 = :Name .* string.(:Num))
</code></pre><p>The last form is much simpler, but only works if the function can be broardcasted (afaIk).</p><h2 id="Lists-and-dicts"><a class="docs-heading-anchor" href="#Lists-and-dicts">Lists and dicts</a><a id="Lists-and-dicts-1"></a><a class="docs-heading-anchor-permalink" href="#Lists-and-dicts" title="Permalink"></a></h2><h3 id="check-if-key-is-in-dict"><a class="docs-heading-anchor" href="#check-if-key-is-in-dict">check if key is in dict</a><a id="check-if-key-is-in-dict-1"></a><a class="docs-heading-anchor-permalink" href="#check-if-key-is-in-dict" title="Permalink"></a></h3><pre><code class="language-">julia&gt; haskey(args,&quot;fit_file&quot;)
true</code></pre><pre><code class="language-">&gt; &quot;fit_file&quot; %in% names(args)</code></pre><h3 id="Collect-instances-into-a-dict"><a class="docs-heading-anchor" href="#Collect-instances-into-a-dict">Collect instances into a dict</a><a id="Collect-instances-into-a-dict-1"></a><a class="docs-heading-anchor-permalink" href="#Collect-instances-into-a-dict" title="Permalink"></a></h3><p>See https://discourse.julialang.org/t/collect-values-in-a-dict/64626</p><pre><code class="language-">julia&gt; l = [x =&gt; x%3 for x in 1:10];
julia&gt; d = Dict{Int, Vector{Int}}()
julia&gt; for (x,y) in l
julia&gt;   push!(get!(Vector{Int},d,y), x) 
julia&gt; end
julia&gt; d

Dict{Int64, Vector{Int64}} with 3 entries:
  0 =&gt; [3, 6, 9]
  2 =&gt; [2, 5, 8]
  1 =&gt; [1, 4, 7, 10]</code></pre><p>Similar in <code>R</code> (not explicit pairs):</p><pre><code class="language-">&gt; l &lt;- (1:10)%%3
&gt; setNames(lapply(unique(l), function(x) which(l == x)), unique(l))
`1`
[1]  1  4  7 10

$`2`
[1] 2 5 8

$`0`
[1] 3 6 9</code></pre><h1 id="Development"><a class="docs-heading-anchor" href="#Development">Development</a><a id="Development-1"></a><a class="docs-heading-anchor-permalink" href="#Development" title="Permalink"></a></h1><h2 id="PkgTemplates"><a class="docs-heading-anchor" href="#PkgTemplates">PkgTemplates</a><a id="PkgTemplates-1"></a><a class="docs-heading-anchor-permalink" href="#PkgTemplates" title="Permalink"></a></h2><p>This repo was setup using this snippet:</p><pre><code class="language-">julia&gt; using PkgTemplates
julia&gt; t = Template(; 
    user=&quot;tp2750&quot;,
    dir=&quot;.&quot;,
    authors=&quot;Thomas Poulsen&quot;,
    julia=v&quot;1.6&quot;,
    plugins=[
        License(; name=&quot;GPL-2.0+&quot;),
        Git(; manifest=false, ssh=true),
        GitHubActions(;extra_versions=[&quot;nightly&quot;], x86=false, windows=false, osx=false), ## skip some defaults
        Codecov(),
        Documenter{GitHubActions}(),
        Develop(),
    ],
  )
julia&gt; t(&quot;tpNotes&quot;)</code></pre><p>Created the repo &quot;tpNotes.jl&quot; in GitHub and just did:</p><pre><code class="language-">tpNotes$ git push --set-upstream origin master</code></pre><p>Note that the project name in PkgTemplates doe not include &quot;.jl&quot;, but the repo-name does.</p><p>After a bit the &quot;CI&quot; and &quot;codecov&quot; badges turn green. But the &quot;docs&quot; badges do not work out of the box.</p><h2 id="Using-ssh"><a class="docs-heading-anchor" href="#Using-ssh">Using ssh</a><a id="Using-ssh-1"></a><a class="docs-heading-anchor-permalink" href="#Using-ssh" title="Permalink"></a></h2><p>Changing to use ssh. First check current with <code>git remote -v</code>. Then change it with <code>git remote set-url origin ...</code>:</p><pre><code class="language-">tpNotes$ git remote -v 
origin	https://github.com/tp2750/tpNotes.jl (fetch)
origin	https://github.com/tp2750/tpNotes.jl (push)

tpNotes$ git remote set-url origin  git@github.com:tp2750/tpNotes.jl.git</code></pre><p>Remember the <code>.git</code> at the end.</p><h1 id="Documentation-using-Documenter.jl"><a class="docs-heading-anchor" href="#Documentation-using-Documenter.jl">Documentation using Documenter.jl</a><a id="Documentation-using-Documenter.jl-1"></a><a class="docs-heading-anchor-permalink" href="#Documentation-using-Documenter.jl" title="Permalink"></a></h1><p>Modules needed in documentation needs to be loaded in the <code>make.jl</code> file. This is also the place to control the sidebar (in the <code>pages = []</code> argument to <code>makedocs</code>). It is good practice to split documentation in several files. See https://juliadocs.github.io/Documenter.jl/stable/man/guide/#Pages-in-the-Sidebar</p><h2 id="Adding-keys-for-Documenter-and-Github-Actions"><a class="docs-heading-anchor" href="#Adding-keys-for-Documenter-and-Github-Actions">Adding keys for Documenter and Github Actions</a><a id="Adding-keys-for-Documenter-and-Github-Actions-1"></a><a class="docs-heading-anchor-permalink" href="#Adding-keys-for-Documenter-and-Github-Actions" title="Permalink"></a></h2><p>For documentation to automatically build, generate keys by running <code>DocumenterTools.genkeys</code> and follow the instructions.</p><p><strong>OBS</strong> Remeber to set the proper workflow permissions: &quot;horizontal menu: Settings -&gt; vertical menu: Actions -&gt; General -&gt; section: Workflow permissions: choose &quot;Read and write permissions&quot; and check the box: &quot;Allow GiHub Actions to create and approve pull requests&quot;.  This is not needed to build documentation, but it is needed for compatHelper to create pull requests when dependencies need to be updated.</p><pre><code class="language-">(tpNotes) pkg&gt; add DocumenterTools
julia&gt; using tpNotes
julia&gt; using DocumenterTools
julia&gt; DocumenterTools.genkeys(user = &quot;tp2750&quot;, repo=&quot;tpNotes.jl&quot;)</code></pre><p>Name the public key (deploy key) &quot;DOCUMENTER<em>PUB&quot; and the private key (repository secret under Settings -&gt; Secrets and variables -&gt; Actions -&gt; Repository secret) &quot;DOCUMENTER</em>KEY&quot;-</p><h2 id="Building-the-docs"><a class="docs-heading-anchor" href="#Building-the-docs">Building the docs</a><a id="Building-the-docs-1"></a><a class="docs-heading-anchor-permalink" href="#Building-the-docs" title="Permalink"></a></h2><p>to build the docs, cd to the docs folder, and jun make.jl in the context of the docs project:</p><pre><code class="language-julia">tpNotes.jl/docs$ julia --project=. make.jl 
</code></pre><p>In github, set github-pages to build from the branch: <code>gh-pages</code> in the <code>/ (root)</code> folder.</p><h2 id="Examples"><a class="docs-heading-anchor" href="#Examples">Examples</a><a id="Examples-1"></a><a class="docs-heading-anchor-permalink" href="#Examples" title="Permalink"></a></h2><p>Code examples in documentation files can share context if they are named.  The <a href="https://juliadocs.github.io/Documenter.jl/stable/man/syntax/#@example-block">documentation</a> does not mention it, but it looks like named blocks have to be continuous (two blocks can not mix).</p><p>Eg:</p><p>&lt;pre&gt;</p><pre><code class="language-julia">  a = 3</code></pre><pre class="documenter-example-output">3</pre><pre><code class="language-julia">  print(a)</code></pre><pre class="documenter-example-output">3</pre><p>&lt;/pre&gt;</p><h1 id="Overloading-Base-operator"><a class="docs-heading-anchor" href="#Overloading-Base-operator">Overloading Base operator</a><a id="Overloading-Base-operator-1"></a><a class="docs-heading-anchor-permalink" href="#Overloading-Base-operator" title="Permalink"></a></h1><p>Overloading a base binary operator (like <code>+</code>):</p><ul><li>Define my own <code>struct</code>.</li><li>Define a method of a base function using that struct. Use symbol notation for the operator.</li></ul><p>No import or export needed.</p><h2 id="Example"><a class="docs-heading-anchor" href="#Example">Example</a><a id="Example-1"></a><a class="docs-heading-anchor-permalink" href="#Example" title="Permalink"></a></h2><pre><code class="language-">struct People
    name::String
end

Base.:+(p1::People, p2::People) = &quot;$(string(p1.name)) and $(string(p2.name))&quot;</code></pre><p>Then we have</p><pre><code class="language-">julia&gt; using tpNotes
julia&gt; p1 = tpNotes.People(&quot;Søren&quot;)
julia&gt; p2 = tpNotes.People(&quot;Mette&quot;)
julia&gt; p1 + p2 == &quot;Søren and Mette&quot;
true</code></pre><h1 id="Code-coverage"><a class="docs-heading-anchor" href="#Code-coverage">Code coverage</a><a id="Code-coverage-1"></a><a class="docs-heading-anchor-permalink" href="#Code-coverage" title="Permalink"></a></h1><p>Computing code coverage locally is done as described in the <a href="https://github.com/JuliaCI/Coverage.jl#working-locally">here</a> (in the README of the <a href="https://github.com/JuliaCI/Coverage.jl">Coverage.jl</a> package).</p><h1 id="PackageCompile"><a class="docs-heading-anchor" href="#PackageCompile">PackageCompile</a><a id="PackageCompile-1"></a><a class="docs-heading-anchor-permalink" href="#PackageCompile" title="Permalink"></a></h1><p>Remember to &quot;dev&quot; the local module from the &quot;app&quot; module. If not, you need to re-add every time you make changes to the actual module.</p><h1 id="Misc"><a class="docs-heading-anchor" href="#Misc">Misc</a><a id="Misc-1"></a><a class="docs-heading-anchor-permalink" href="#Misc" title="Permalink"></a></h1><h2 id="Which-project-is-active?"><a class="docs-heading-anchor" href="#Which-project-is-active?">Which project is active?</a><a id="Which-project-is-active?-1"></a><a class="docs-heading-anchor-permalink" href="#Which-project-is-active?" title="Permalink"></a></h2><pre><code class="language-none">Base.active_project()</code></pre><h1 id="K-means"><a class="docs-heading-anchor" href="#K-means">K-means</a><a id="K-means-1"></a><a class="docs-heading-anchor-permalink" href="#K-means" title="Permalink"></a></h1><ul><li>K-means</li></ul><p>https://juliastats.org/Clustering.jl/dev/kmeans.html</p><p>Elements to cluster are in <em>columns</em>: (use x&#39;)</p><pre><code class="language-">using Clustering
julia&gt; x=vcat(0,repeat(1:1,10))
julia&gt; res = kmeans(x&#39;,2) ## or kmeans(reshape(x, 1,11),2) 
julia&gt; res.centers
1×2 Matrix{Float64}:
 1.0  0.0
julia&gt; assignments(res)
11-element Vector{Int64}:
 2
 1
 1
 1
 1
 1
 1
 1
 1
 1
 1</code></pre><h2 id="K-medoids"><a class="docs-heading-anchor" href="#K-medoids">K-medoids</a><a id="K-medoids-1"></a><a class="docs-heading-anchor-permalink" href="#K-medoids" title="Permalink"></a></h2><p>Selects a representing point.</p><p>Needs distance matrix.</p><pre><code class="language-">julia&gt; using Distances
julia&gt; x_dist = pairwise(Euclidean(), x&#39;; dims=2)
# or simply (https://discourse.julialang.org/t/pairwise-distances-from-a-single-column-or-vector/29415/6)
julia&gt; x_dist = [abs(i-j) for i in x, j in x]

julia&gt; res2 = kmedoids(x_dist, 2)
julia&gt; res2.medoids ## indices of medoid points
2-element Vector{Int64}:
 2
 1
# medoid points:
julia&gt; x[res2.medoids]
2-element Vector{Int64}:
 1
 0
julia&gt; assignments(res2)
11-element Vector{Int64}:
 2
 1
 1
 1
 1
 1
 1
 1
 1
 1
 1
 ```
 
# Conversions

## matrix to vector and back
</code></pre><p>julia&gt; m = [1 3 5; 2 4 6] 2×3 Matrix{Int64}:  1  3  5  2  4  6</p><p>julia&gt; vec(m) 6-element Vector{Int64}:  1  2  3  4  5  6</p><p>julia&gt; reshape(vec(m), size(m)) == m true</p><pre><code class="language-none">

# Tests
## Comparing at stated precision
https://discourse.julialang.org/t/compare-numbers-at-the-stated-precision/86719/10
In tests I’ll like to be able to write the following and the test to pass:
</code></pre><p>julia @test aresame(pi, 3.14)</p><pre><code class="language-none">
The following works:

</code></pre><p>julia @test isapprox(pi, 3.14, atol = 0.005)</p><pre><code class="language-none">
But then I need to adjust the absolute tolerance manually.

I need a function to find the “number of significant digits” of a numeric literal and use that.

The following apparently works, but I’m wondering if this already exists?

</code></pre><p>julia function sigdigs(x)     x<em>string = string(convert(Float64,x))     length(x</em>string) - findlast(&#39;.&#39;,x_string) end</p><p>function aresame(x,y)     tol<em>digits = min(sigdigs(x), sigdigs(y))     tol = .49*0.1^(tol</em>digits)     isapprox(x,y,atol=tol) end</p><p>julia&gt; aresame(pi,3.1) true</p><p>julia&gt; aresame(pi,3.14) true</p><p>julia&gt; aresame(pi,3.141) false</p><p>julia&gt; aresame(pi,3.1415) false</p><pre><code class="language-none">
# Packages
Cool and useful packages

## [TerminalPager.jl](https://github.com/ronisbr/TerminalPager.jl)
Great for browsing large tables:
</code></pre><p>using TerminalPager, DataFrames pager(DataFrame(rand(100, 100), :auto))</p><pre><code class="language-none">
Press ? to get navigation help:

* Shift -&gt;, Shift &lt;- to move side-wise
* u/d to move up/down by half a page or
  Page-up/down for full page
* &lt; or g to go to top
* &gt; or G to go to end

## [DefaultApplication.jl](https://github.com/tpapp/DefaultApplication.jl)
Basically just calling `xdg-open`, but still useful.

# Base functions

* `repr` Create a string from any value using the show function.
* replace(string, pattern =&gt; replacement; [count])

# Reuse installed version of packages
From julia 1.9 we can change the default package installation strategy to Pkg.PRESERVE_TIERED_INSTALLED to let the package manager try to install versions of packages while keeping as many versions of packages already installed as possible:
</code></pre><p>julia ENV[&quot;JULIA<em>PKG</em>PRESERVE<em>TIERED</em>INSTALLED&quot;] = true</p><pre><code class="language-none">
See https://docs.julialang.org/en/v1/manual/environment-variables/#JULIA_PKG_PRESERVE_TIERED_INSTALLED,
https://pkgdocs.julialang.org/v1/api/#Pkg.add

From doc of Pkg.add:

Pkg resolves the set of packages in your environment using a tiered algorithm. The preserve keyword argument allows you to key into a specific tier in the resolve algorithm. The following table describes the argument values for preserve (in order of strictness):

| Value | Description |
| -- | -- |
| PRESERVE_ALL_INSTALLED |  Like PRESERVE_ALL and only add those already installed |
| PRESERVE_ALL | Preserve the state of all existing dependencies (including recursive dependencies) |
| PRESERVE_DIRECT | Preserve the state of all existing direct dependencies |
| PRESERVE_SEMVER | Preserve semver-compatible versions of direct dependencies |
| PRESERVE_NONE | Do not attempt to preserve any version information |
| PRESERVE_TIERED_INSTALLED | Like PRESERVE_TIERED except PRESERVE_ALL_INSTALLED is tried first |
| PRESERVE_TIERED | Use the tier that will preserve the most version information while allowing version resolution to succeed (this is the default) | 
	

# startup.jl

My current `.julia/config/startup.jl` file

</code></pre><p>julia ENV[&quot;JULIA_EDITOR&quot;] = &quot;emacs&quot;</p><h1 id="ENV[&quot;JULIA*NUM*THREADS&quot;]3,1"><a class="docs-heading-anchor" href="#ENV[&quot;JULIA*NUM*THREADS&quot;]3,1">ENV[&quot;JULIA<em>NUM</em>THREADS&quot;]=3,1</a><a id="ENV[&quot;JULIA*NUM*THREADS&quot;]3,1-1"></a><a class="docs-heading-anchor-permalink" href="#ENV[&quot;JULIA*NUM*THREADS&quot;]3,1" title="Permalink"></a></h1><p>using Revise #using Infiltrator #using DrWatson</p><h2 id="using-PkgTemplates"><a class="docs-heading-anchor" href="#using-PkgTemplates">using PkgTemplates</a><a id="using-PkgTemplates-1"></a><a class="docs-heading-anchor-permalink" href="#using-PkgTemplates" title="Permalink"></a></h2><p>ENV[&quot;pkg<em>template&quot;] = &quot;&quot;&quot;Template(;julia=v&quot;1.10&quot;,user=&quot;tp2750&quot;,dir = &quot;.&quot;, plugins=[Git(; manifest=false, ssh=true),Documenter{GitHubActions}(),GitHubActions(extra</em>versions= [&quot;1.10&quot;, &quot;1.11&quot;)])&quot;&quot;&quot; @info &quot;&quot;&quot;To start a package, do:\nusing PkgTemplates\nt = eval(Meta.parse(ENV[&quot;pkg_template&quot;]))\nt(&quot;MyPackage&quot;)&quot;&quot;&quot;</p><h2 id="ENV[&quot;JULIA*PKG*PRESERVE*TIERED*INSTALLED&quot;]-true"><a class="docs-heading-anchor" href="#ENV[&quot;JULIA*PKG*PRESERVE*TIERED*INSTALLED&quot;]-true">ENV[&quot;JULIA<em>PKG</em>PRESERVE<em>TIERED</em>INSTALLED&quot;] = true</a><a id="ENV[&quot;JULIA*PKG*PRESERVE*TIERED*INSTALLED&quot;]-true-1"></a><a class="docs-heading-anchor-permalink" href="#ENV[&quot;JULIA*PKG*PRESERVE*TIERED*INSTALLED&quot;]-true" title="Permalink"></a></h2><h2 id="@info-&quot;PRESERVE*TIERED*INSTALLED-set-by-JULIA*PKG*PRESERVE*TIERED*INSTALLED&quot;"><a class="docs-heading-anchor" href="#@info-&quot;PRESERVE*TIERED*INSTALLED-set-by-JULIA*PKG*PRESERVE*TIERED*INSTALLED&quot;">@info &quot;PRESERVE<em>TIERED</em>INSTALLED set by JULIA<em>PKG</em>PRESERVE<em>TIERED</em>INSTALLED&quot;</a><a id="@info-&quot;PRESERVE*TIERED*INSTALLED-set-by-JULIA*PKG*PRESERVE*TIERED*INSTALLED&quot;-1"></a><a class="docs-heading-anchor-permalink" href="#@info-&quot;PRESERVE*TIERED*INSTALLED-set-by-JULIA*PKG*PRESERVE*TIERED*INSTALLED&quot;" title="Permalink"></a></h2><h2 id="@info-&quot;To-reset-to-default-do:-ENV[\\&quot;JULIA*PKG*PRESERVE*TIERED*INSTALLED\\&quot;]-true&quot;"><a class="docs-heading-anchor" href="#@info-&quot;To-reset-to-default-do:-ENV[\\&quot;JULIA*PKG*PRESERVE*TIERED*INSTALLED\\&quot;]-true&quot;">@info &quot;To reset to default do: ENV[\&quot;JULIA<em>PKG</em>PRESERVE<em>TIERED</em>INSTALLED\&quot;] = true&quot;</a><a id="@info-&quot;To-reset-to-default-do:-ENV[\\&quot;JULIA*PKG*PRESERVE*TIERED*INSTALLED\\&quot;]-true&quot;-1"></a><a class="docs-heading-anchor-permalink" href="#@info-&quot;To-reset-to-default-do:-ENV[\\&quot;JULIA*PKG*PRESERVE*TIERED*INSTALLED\\&quot;]-true&quot;" title="Permalink"></a></h2><p>@info &quot;To prefer already installed versions of libraries, set ENV[\&quot;JULIA<em>PKG</em>PRESERVE<em>TIERED</em>INSTALLED\&quot;] = true\n Undo by ENV[\&quot;JULIA<em>PKG</em>PRESERVE<em>TIERED</em>INSTALLED\&quot;] = true&quot;</p><h2 id="https://twitter.com/heyjoshday/status/1555527185028395010"><a class="docs-heading-anchor" href="#https://twitter.com/heyjoshday/status/1555527185028395010">https://twitter.com/heyjoshday/status/1555527185028395010</a><a id="https://twitter.com/heyjoshday/status/1555527185028395010-1"></a><a class="docs-heading-anchor-permalink" href="#https://twitter.com/heyjoshday/status/1555527185028395010" title="Permalink"></a></h2><h1 id="macro-dev()"><a class="docs-heading-anchor" href="#macro-dev()">macro dev()</a><a id="macro-dev()-1"></a><a class="docs-heading-anchor-permalink" href="#macro-dev()" title="Permalink"></a></h1><h1 id="pkg-Symbol("><a class="docs-heading-anchor" href="#pkg-Symbol(">pkg = Symbol(</a><a id="pkg-Symbol(-1"></a><a class="docs-heading-anchor-permalink" href="#pkg-Symbol(" title="Permalink"></a></h1><h1 id="replace("><a class="docs-heading-anchor" href="#replace(">replace(</a><a id="replace(-1"></a><a class="docs-heading-anchor-permalink" href="#replace(" title="Permalink"></a></h1><h1 id="readline(&quot;Project.toml&quot;),"><a class="docs-heading-anchor" href="#readline(&quot;Project.toml&quot;),">readline(&quot;Project.toml&quot;),</a><a id="readline(&quot;Project.toml&quot;),-1"></a><a class="docs-heading-anchor-permalink" href="#readline(&quot;Project.toml&quot;)," title="Permalink"></a></h1><h1 id="&quot;name-\\&quot;&quot;-&quot;&quot;,"><a class="docs-heading-anchor" href="#&quot;name-\\&quot;&quot;-&quot;&quot;,">&quot;name = \&quot;&quot; =&gt; &quot;&quot;,</a><a id="&quot;name-\\&quot;&quot;-&quot;&quot;,-1"></a><a class="docs-heading-anchor-permalink" href="#&quot;name-\\&quot;&quot;-&quot;&quot;," title="Permalink"></a></h1><h1 id="&#39;&quot;&#39;-&quot;&quot;"><a class="docs-heading-anchor" href="#&#39;&quot;&#39;-&quot;&quot;">&#39;&quot;&#39; =&gt; &quot;&quot;</a><a id="&#39;&quot;&#39;-&quot;&quot;-1"></a><a class="docs-heading-anchor-permalink" href="#&#39;&quot;&#39;-&quot;&quot;" title="Permalink"></a></h1><h1 id=")"><a class="docs-heading-anchor" href="#)">)</a><a id=")-1"></a><a class="docs-heading-anchor-permalink" href="#)" title="Permalink"></a></h1><h1 id=")-2"><a class="docs-heading-anchor" href="#)-2">)</a><a class="docs-heading-anchor-permalink" href="#)-2" title="Permalink"></a></h1><h1 id="esc(:(using-Pkg;-Pkg.activate(&quot;.&quot;);-using-Revise,-:pkg))"><a class="docs-heading-anchor" href="#esc(:(using-Pkg;-Pkg.activate(&quot;.&quot;);-using-Revise,-:pkg))">esc(:(using Pkg; Pkg.activate(&quot;.&quot;); using Revise, pkg))</a><a id="esc(:(using-Pkg;-Pkg.activate(&quot;.&quot;);-using-Revise,-:pkg))-1"></a><a class="docs-heading-anchor-permalink" href="#esc(:(using-Pkg;-Pkg.activate(&quot;.&quot;);-using-Revise,-:pkg))" title="Permalink"></a></h1><h1 id="end"><a class="docs-heading-anchor" href="#end">end</a><a id="end-1"></a><a class="docs-heading-anchor-permalink" href="#end" title="Permalink"></a></h1><h1 id="-https://discourse.julialang.org/t/what-is-in-your-startup-jl/18228/2?utp2750"><a class="docs-heading-anchor" href="###-https://discourse.julialang.org/t/what-is-in-your-startup-jl/18228/2?utp2750">## https://discourse.julialang.org/t/what-is-in-your-startup-jl/18228/2?u=tp2750</a><a id="-https://discourse.julialang.org/t/what-is-in-your-startup-jl/18228/2?utp2750-1"></a><a class="docs-heading-anchor-permalink" href="###-https://discourse.julialang.org/t/what-is-in-your-startup-jl/18228/2?utp2750" title="Permalink"></a></h1><h1 id="cdpkg(pkg)-cd(dirname(Base.find_package(string(pkg))))"><a class="docs-heading-anchor" href="#cdpkg(pkg)-cd(dirname(Base.find_package(string(pkg))))">cdpkg(pkg) = cd(dirname(Base.find_package(string(pkg))))</a><a id="cdpkg(pkg)-cd(dirname(Base.find_package(string(pkg))))-1"></a><a class="docs-heading-anchor-permalink" href="#cdpkg(pkg)-cd(dirname(Base.find_package(string(pkg))))" title="Permalink"></a></h1><h1 id="macro-cdpkg(pkg)"><a class="docs-heading-anchor" href="#macro-cdpkg(pkg)">macro cdpkg(pkg)</a><a id="macro-cdpkg(pkg)-1"></a><a class="docs-heading-anchor-permalink" href="#macro-cdpkg(pkg)" title="Permalink"></a></h1><h1 id="cdpkg(pkg)"><a class="docs-heading-anchor" href="#cdpkg(pkg)">cdpkg(pkg)</a><a id="cdpkg(pkg)-1"></a><a class="docs-heading-anchor-permalink" href="#cdpkg(pkg)" title="Permalink"></a></h1><h1 id="return-nothing"><a class="docs-heading-anchor" href="#return-nothing">return nothing</a><a id="return-nothing-1"></a><a class="docs-heading-anchor-permalink" href="#return-nothing" title="Permalink"></a></h1><h1 id="end-2"><a class="docs-heading-anchor" href="#end-2">end</a><a class="docs-heading-anchor-permalink" href="#end-2" title="Permalink"></a></h1><p>```</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Home</a><a class="docs-footer-nextpage" href="../logging/">Logging »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Saturday 22 February 2025 17:25">Saturday 22 February 2025</span>. Using Julia version 1.11.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
